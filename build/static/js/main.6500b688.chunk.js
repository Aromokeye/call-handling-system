(this["webpackJsonpcall-handling-system"]=this["webpackJsonpcall-handling-system"]||[]).push([[0],{217:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(81),i=a.n(s),r=(a(92),a(93),a(87)),l=a(4),o=(a(94),a(14)),u=a.n(o),d=function(e,t,a){u()("https://techtestcalllogapi.azurewebsites.net/api/".concat(e)).then((function(e){204===e.status&&a("No data exist for this request");var c=e.data;t(c),a(""),console.log(e.status)})).catch((function(e){a("Aww aww, there's an issue getting data")}))},h=function(e,t){e(t)},p=a(35),m=a(48),j=Object(c.createContext)({id:0,data:[]}),b=a(11),x=a(1);function f(e){var t={name:"",description:"",hasSupportContract:!1,customerId:Object(c.useContext)(j).id},a=Object(m.a)({enableReinitialize:!0,initialValues:t,validationSchema:b.b({name:b.c().max(15,"Too long").required("Name Required"),description:b.c().max(40,"Maximum of 40 characters allowed").required("Description Required"),customerId:b.a().required("Required")}),onSubmit:function(t,a){var c,n;c=e.route,n=t,u.a.post("https://techtestcalllogapi.azurewebsites.net/api/".concat(c),n).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),e.clickEvent(),a.resetForm()}});return Object(x.jsxs)("form",{onSubmit:a.handleSubmit,className:"w-75 flex flex-column justify-around h-100",children:[Object(x.jsx)("label",{htmlFor:"Name",children:"Name"}),Object(x.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"The installed application",className:"",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name}),a.touched.name&&a.errors.name?Object(x.jsx)("div",{className:"highlight b f6",children:a.errors.name}):null,Object(x.jsx)("label",{htmlFor:"description",children:"Description"}),Object(x.jsx)("input",{type:"text",id:"description",placeholder:"A description of the application",name:"description",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.description}),a.touched.description&&a.errors.description?Object(x.jsx)("div",{className:"highlight b f6",children:a.errors.description}):null,Object(x.jsxs)("label",{className:"flex items-center",children:[Object(x.jsx)("input",{type:"checkbox",className:"w1 h1 mr1 mv1 textaltbg",name:"hasSupportContract",checked:a.values.hasSupportContract,onChange:a.handleChange,onBlur:a.handleBlur}),"Has Support Contract?"]}),Object(x.jsx)("label",{htmlFor:"customerId",children:"Customer Id"}),Object(x.jsx)("input",{type:"number",id:"customerId",name:"customerId",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.customerId}),a.touched.customerId&&a.errors.customerId?Object(x.jsx)("div",{className:"highlight b f6",children:a.errors.customerId}):null,Object(x.jsx)("button",{type:"submit",className:"mt1",children:"Submit"})]})}function O(e){var t=e.route,a={applicationId:e.id,appName:e.name,appHasSupportContract:e.support,appDescription:e.describe},c=Object(m.a)({enableReinitialize:!0,initialValues:a,validationSchema:b.b({applicationId:b.a().required("Application ID Required"),appName:b.c().max(15,"Too long").required("Application name required"),appDescription:b.c().max(40,"Too long").required("Description Required")}),onSubmit:function(a,c){!function(e,t){var a={applicationId:t.applicationId,name:t.appName,description:t.appDescription,hasSupportContract:t.appHasSupportContract};u.a.put("https://techtestcalllogapi.azurewebsites.net/api/".concat(e),a).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(t,a),e.clickEvent(),c.resetForm()}});return Object(x.jsxs)("form",{onSubmit:c.handleSubmit,className:"w-75 b flex flex-column justify-around h-100 z-999",children:[Object(x.jsx)("label",{htmlFor:"applicationId",children:"Application Id"}),Object(x.jsx)("input",{type:"number",id:"applicationId",name:"applicationId",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.applicationId}),c.touched.applicationId&&c.errors.applicationId?Object(x.jsx)("div",{className:"highlight b f6",children:c.errors.applicationId}):null,Object(x.jsx)("label",{htmlFor:"name",children:"Application Name"}),Object(x.jsx)("input",{type:"text",id:"appName",name:"appName",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.appName}),c.touched.appName&&c.errors.appName?Object(x.jsx)("div",{className:"highlight b f6",children:c.errors.appName}):null,Object(x.jsxs)("label",{className:"flex items-center",children:[Object(x.jsx)("input",{type:"checkbox",className:"w1 h1 mr1 mv1",name:"appHasSupportContract",checked:c.values.appHasSupportContract,onChange:c.handleChange,onBlur:c.handleBlur}),"Has Support Contract?"]}),Object(x.jsx)("label",{htmlFor:"appDescription",children:"Description"}),Object(x.jsx)("input",{type:"text",id:"appDescription",placeholder:"A description of the application",name:"appDescription",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.appDescription}),c.touched.appDescription&&c.errors.appDescription?Object(x.jsx)("div",{className:"highlight b f6",children:c.errors.appDescription}):null,Object(x.jsx)("button",{type:"submit",className:"mt1",children:"Submit"})]})}function g(e){var t=e.service,a=e.className,n=e.icons,s=Object(c.useState)(!1),i=Object(l.a)(s,2),r=i[0],o=i[1],u=Object(c.useState)(""),h=Object(l.a)(u,2),m=h[0],b=h[1],g=Object(c.useState)([]),v=Object(l.a)(g,2),N=v[0],C=v[1],S=Object(c.useState)([]),w=Object(l.a)(S,2),y=w[0],I=w[1],D=Object(c.useState)(!1),B=Object(l.a)(D,2),k=B[0],q=B[1],z=Object(c.useState)({id:0,name:"",describe:"",support:!1}),A=Object(l.a)(z,2),F=A[0],E=A[1];Object(c.useEffect)((function(){d(t,C,b)}),[t]);var R=Object(c.useContext)(j);Object(c.useEffect)((function(){N.length>0&&I(N.filter((function(e){return e.customer.id===R.id})))}),[N,R.id]);var H=function(){o(!r),q(!1)},T=F.id,P=F.name,M=F.describe,J=F.support;return Object(x.jsxs)("div",{className:"".concat(a," ").concat(r&&""),children:[y.length>0&&Object(x.jsx)("h1",{className:"customername f3 lh-title text",children:y[0].customer.name}),Object(x.jsxs)("div",{className:"block1inner relative w-100 h-100 ".concat(r&&"rotate"),children:[Object(x.jsxs)("div",{className:"front",children:[Object(x.jsxs)("div",{className:"absolute top-1 left-1 flex items-center b highlight verticaltext",children:[Object(x.jsx)(p.a,{icon:n.header,size:"2x"}),Object(x.jsx)("div",{className:"f6 measure lh-title mt2 text flex",children:t})]}),Object(x.jsx)("div",{className:"".concat(r?"dn":"flex w-90 h-100 flex-wrap center justify-center items-center pa3 overflow-y-auto"),children:y.length>0&&"Application"===t?y.map((function(e,t){return Object(x.jsxs)("div",{className:"w-30 textaltbg pa3 ma2 f5 measure b br3 relative",children:[Object(x.jsx)("div",{className:"flex justify-around absolute top-1 right-1 highlight",children:Object(x.jsx)("button",{className:"iconsbg h2 w2 br-100 flex justify-center items-center mh1 bn highlight",onClick:function(){return function(e,t,a,c){q(!0),o(!r),E({id:e,name:t,describe:a,support:c})}(e.id,e.name,e.description,e.hasSupportContract)},children:Object(x.jsx)(p.a,{icon:n.edit})})}),Object(x.jsxs)("div",{className:"blockid f6 measure lh-copy",children:["Application ID: ",e.id]}),Object(x.jsx)("div",{className:"f5 measure lh-copy",children:e.name}),Object(x.jsx)("div",{className:"f6 measure lh-copy",children:e.description}),Object(x.jsxs)("div",{className:"f6 measure lh-copy",children:["Installed: ",e.installationDate.substring(0,10)]}),Object(x.jsxs)("div",{className:"f6 measure lh-copy",children:["Has Support Contract: ",e.hasSupportContract?"Yes":"No"]})]},t)})):Object(x.jsxs)("div",{children:["Customer has no records for ",t]})||Object(x.jsx)("div",{children:m})}),Object(x.jsxs)("button",{className:"flex items-center flex-column absolute shadow-3 highlightbg text iconsbg\r bottom-1 left-1 b pa1 grow-large w3 h3 br-100 ba",onClick:H,children:[Object(x.jsx)("div",{className:" \r flex justify-center items-center",children:Object(x.jsx)(p.a,{icon:n.create,size:"1x"})}),Object(x.jsx)("div",{className:"f7 measure mt1",children:"Add Record"})]})]}),Object(x.jsx)("div",{className:"back h-100 flex justify-center items-center mt0",children:k?Object(x.jsx)(O,{clickEvent:H,route:t,id:T,name:P,describe:M,support:J}):Object(x.jsx)(f,{clickEvent:H,route:t})})]})]})}var v=a(25);function N(){return Object(x.jsx)("div",{className:"w-80",children:Object(x.jsx)(g,{service:"Application",icons:{header:v.a,edit:v.b,delete:v.d,create:v.c},className:"block1 flex justify-center items-center relative shadow-4"})})}function C(e){var t=e.customers,a=e.setCustomerId,c=e.getCustomerId,n=e.asyncErr;return Object(x.jsx)("div",{className:"h-50 ma2 flex flex-column justify-between  pa1",children:t.length>0?t.map((function(e,t){return Object(x.jsxs)("div",{className:"customer flex flex-column justify-center h-100 pointer",onClick:function(){return c(a,e.id)},children:[Object(x.jsxs)("div",{className:"flex id",children:[Object(x.jsx)("div",{className:"f5 measure lh-copy ttu",children:"Customer ID:"}),Object(x.jsx)("div",{className:"measure f5 lh-copy",children:e.id})]}),Object(x.jsx)("div",{className:"measure f4 lh-solid name",children:e.name})]},t)})):Object(x.jsx)("div",{children:n})})}var S=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),r=i[0],o=i[1],p=Object(c.useState)(0),m=Object(l.a)(p,2),b=m[0],f=m[1],O=Object(c.useState)({id:0,data:[]}),g=Object(l.a)(O,2),v=g[0],S=g[1];return Object(c.useEffect)((function(){d("Customer",n,o)}),[]),Object(c.useEffect)((function(){b&&function(e,t,a){try{Promise.all([u.a.get("https://techtestcalllogapi.azurewebsites.net/api/Application/".concat(e)),u.a.get("https://techtestcalllogapi.azurewebsites.net/api/Call/".concat(e)),u.a.get("https://techtestcalllogapi.azurewebsites.net/api/Statistics/".concat(e)),u.a.get("https://techtestcalllogapi.azurewebsites.net/api/Status/".concat(e))]).then((function(c){var n=[c[0].data,c[1].data,c[2].data,c[3].data];console.log(n),t({id:e,data:n}),a("")}))}catch(c){a("There seems to be a problem getting data for this customer")}}(b,S,o)}),[b]),Object(x.jsxs)("div",{className:"w-100 vh-100 flex flex-row",children:[Object(x.jsx)("aside",{className:"w-25  mh2 mv2 br4 flex justify-center items-center shadow-1",children:Object(x.jsx)(C,{customers:a,setCustomerId:f,getCustomerId:h,asyncErr:r})}),Object(x.jsxs)("main",{className:"w-75 flex flex-column items-center mt2",children:[Object(x.jsx)("h1",{className:"flex justify- w-75 ma2 f2 lh-title",children:"Main Dashboard"}),Object(x.jsx)(j.Provider,{value:v,children:Object(x.jsx)(N,{})})]})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,218)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(r.a,{children:Object(x.jsx)(S,{})})}),document.getElementById("root")),w()},92:function(e,t,a){},94:function(e,t,a){}},[[217,1,2]]]);
//# sourceMappingURL=main.6500b688.chunk.js.map