(this["webpackJsonpcall-handling-system"]=this["webpackJsonpcall-handling-system"]||[]).push([[0],{222:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),i=c(87),l=c.n(i),n=(c(97),c(98),c(26)),r=c(4),o=(c(99),c(16)),d=c.n(o),u=function(e,t,c){d()("https://techtestcalllogapi.azurewebsites.net/api/".concat(e)).then((function(e){204===e.status&&c("No data exist for this request");var s=e.data;t(s),c(""),console.log(e.data)})).catch((function(e){c("Aww aww, there's an issue getting data")}))},h=function(e,t){e(t)},j=c(3),b=c(1);function m(e){var t=Object(j.f)(),c=e.customers,s=e.setCustomerId,a=e.getCustomerId,i=e.asyncErr;return Object(b.jsx)("div",{className:"h-50 pa3 flex justify-center flex-column br4",children:c.length>0?c.map((function(e,c){return Object(b.jsxs)("div",{className:"customer flex flex-column justify-center h-75 pointer",onClick:function(){a(s,e.id),t.push("/statistics")},children:[Object(b.jsxs)("div",{className:"flex id",children:[Object(b.jsx)("div",{className:"f5 measure lh-copy ttu",children:"Customer ID:"}),Object(b.jsx)("div",{className:"measure f5 lh-copy",children:e.id})]}),Object(b.jsx)("div",{className:"measure f4 lh-solid name",children:e.name})]},c)})):Object(b.jsx)("div",{children:i})})}function p(){return Object(b.jsxs)("div",{className:"w-80 flex justify-center items-center flex-column hero",children:[Object(b.jsx)("div",{className:"f2 textalt measure b lh-copy",children:"Welcome!"}),Object(b.jsx)("h1",{className:"f-headline",children:"Call Handling System"}),Object(b.jsx)("p",{className:"f4 textalt measure b lh-copy",children:"Click on customer name to view and edit records"})]})}var x=Object(s.createContext)({id:0,data:[]}),f=c(12),O=c(20),v=c(42),g=c(17);function N(e){var t={name:"",description:"",hasSupportContract:!1,customerId:Object(s.useContext)(x).id},c=Object(v.a)({enableReinitialize:!0,initialValues:t,validationSchema:g.b({name:g.c().max(15,"Too long").required("Name Required"),description:g.c().max(40,"Maximum of 40 characters allowed").required("Description Required"),customerId:g.a().required("Required")}),onSubmit:function(t,c){var s,a;s=e.route,a=t,d.a.post("https://techtestcalllogapi.azurewebsites.net/api/".concat(s),a).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),e.clickEvent(),c.resetForm()}});return Object(b.jsxs)("form",{onSubmit:c.handleSubmit,className:"w-75 flex flex-column justify-around h-100 b",children:[Object(b.jsx)("label",{htmlFor:"Name",children:"Name"}),Object(b.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"The installed application",className:"",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.name}),c.touched.name&&c.errors.name?Object(b.jsx)("div",{className:"highlight b f6",children:c.errors.name}):null,Object(b.jsx)("label",{htmlFor:"description",children:"Description"}),Object(b.jsx)("input",{type:"text",id:"description",placeholder:"A description of the application",name:"description",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.description}),c.touched.description&&c.errors.description?Object(b.jsx)("div",{className:"highlight b f6",children:c.errors.description}):null,Object(b.jsxs)("label",{className:"",children:[Object(b.jsx)("input",{type:"checkbox",className:"w1 h1 mr1 mv1",name:"hasSupportContract",checked:c.values.hasSupportContract,onChange:c.handleChange,onBlur:c.handleBlur}),"Has Support Contract?"]}),Object(b.jsx)("label",{htmlFor:"customerId",children:"Customer Id"}),Object(b.jsx)("input",{type:"number",id:"customerId",name:"customerId",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.customerId}),c.touched.customerId&&c.errors.customerId?Object(b.jsx)("div",{className:"highlight b f6",children:c.errors.customerId}):null,Object(b.jsx)("button",{type:"submit",className:"mt1",children:"Submit"})]})}function w(e){var t=e.route,c={applicationId:e.id,appName:e.name,appHasSupportContract:e.support,appDescription:e.describe},s=Object(v.a)({enableReinitialize:!0,initialValues:c,validationSchema:g.b({applicationId:g.a().required("Application ID Required"),appName:g.c().max(15,"Too long").required("Application name required"),appDescription:g.c().max(40,"Too long").required("Description Required")}),onSubmit:function(c,s){!function(e,t){var c={applicationId:t.applicationId,name:t.appName,description:t.appDescription,hasSupportContract:t.appHasSupportContract};d.a.put("https://techtestcalllogapi.azurewebsites.net/api/".concat(e),c).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(t,c),e.clickEvent(),s.resetForm()}});return Object(b.jsxs)("form",{onSubmit:s.handleSubmit,className:"w-75 b flex flex-column justify-around h-100 b",children:[Object(b.jsx)("label",{htmlFor:"applicationId",children:"Application Id"}),Object(b.jsx)("input",{type:"number",id:"applicationId",name:"applicationId",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.applicationId}),s.touched.applicationId&&s.errors.applicationId?Object(b.jsx)("div",{className:"highlight b f6",children:s.errors.applicationId}):null,Object(b.jsx)("label",{htmlFor:"name",children:"Application Name"}),Object(b.jsx)("input",{type:"text",id:"appName",name:"appName",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.appName}),s.touched.appName&&s.errors.appName?Object(b.jsx)("div",{className:"highlight b f6",children:s.errors.appName}):null,Object(b.jsxs)("label",{className:"",children:[Object(b.jsx)("input",{type:"checkbox",className:"w1 h1 mr1 mv1",name:"appHasSupportContract",checked:s.values.appHasSupportContract,onChange:s.handleChange,onBlur:s.handleBlur}),"Has Support Contract?"]}),Object(b.jsx)("label",{htmlFor:"appDescription",children:"Description"}),Object(b.jsx)("input",{type:"text",id:"appDescription",placeholder:"A description of the application",name:"appDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.appDescription}),s.touched.appDescription&&s.errors.appDescription?Object(b.jsx)("div",{className:"highlight b f6",children:s.errors.appDescription}):null,Object(b.jsx)("button",{type:"submit",className:"mt1",children:"Submit"})]})}function C(e){var t=e.needed,c=Object(v.a)({enableReinitialize:!0,initialValues:{select:t.status.description},onSubmit:function(e){var c={callId:t.id,status:0};"Open"===e.select?c.status=101:"Closed"===e.select?c.status=102:"Re-Opened"===e.select?c.status=103:"AwaitingCustomer"===e.select&&(c.status=104),function(e){d.a.patch("https://techtestcalllogapi.azurewebsites.net/api/Call",e).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(c)}});return Object(b.jsxs)("form",{onSubmit:c.handleSubmit,className:"formselect flex justify-start",children:[Object(b.jsxs)("select",{value:c.values.select,onChange:c.handleChange,onBlur:c.handleBlur,className:"h2 ".concat("Open"===t.status.description?"sel2":"Closed"===t.status.description?"sel1":"Re-Opened"===t.status.description?"sel3":"AwaitingCustomer"===t.status.description?"sel4":void 0),name:"select",children:[Object(b.jsx)("option",{children:"Open"}),Object(b.jsx)("option",{children:"Closed"}),Object(b.jsx)("option",{children:"Re-Opened"}),Object(b.jsx)("option",{children:"AwaitingCustomer"})]}),Object(b.jsx)("button",{type:"submit",className:"w2 h2 br-100 flex flex-row bn justify-center items-center iconsbg ml1 pointer",children:Object(b.jsx)(O.a,{icon:f.a})})]})}function y(e){var t=e.service,c=e.className,a=e.icons,i=Object(s.useState)(!1),l=Object(r.a)(i,2),n=l[0],o=l[1],d=Object(s.useState)(""),h=Object(r.a)(d,2),j=h[0],m=h[1],p=Object(s.useState)([]),f=Object(r.a)(p,2),v=f[0],g=f[1],C=Object(s.useState)([]),y=Object(r.a)(C,2),S=y[0],I=y[1],k=Object(s.useState)(!1),D=Object(r.a)(k,2),B=D[0],A=D[1],z=Object(s.useState)({id:0,name:"",describe:"",support:!1}),q=Object(r.a)(z,2),E=q[0],R=q[1];Object(s.useEffect)((function(){u(t,g,m)}),[t]);var F=Object(s.useContext)(x);Object(s.useEffect)((function(){v.length>0&&I(v.filter((function(e){return e.customer.id===F.id})))}),[v,F.id]);var H=function(){o(!n),A(!1)},P=E.id,T=E.name,L=E.describe,M=E.support;return Object(b.jsxs)("div",{className:"".concat(c," ").concat(n&&""),children:[S.length>0&&"Application"===t?Object(b.jsx)("h1",{className:"customername f3 lh-title",children:S[0].customer.name}):null,Object(b.jsxs)("div",{className:"block1inner relative w-100 h-100 shadow-4 br4 ".concat(n&&"rotate"),children:[Object(b.jsxs)("div",{className:"front",children:[Object(b.jsxs)("div",{className:"absolute top-1 left-1 flex items-center b highlight verticaltext",children:[Object(b.jsx)(O.a,{icon:a.header,size:"2x"}),Object(b.jsx)("div",{className:"f6 measure lh-title mt2 text flex",children:t})]}),Object(b.jsx)("div",{className:"".concat(n?"dn":"flex w-100 flex-wrap center justify-center items-start pa3 overflow-y-auto scroll"),children:S.length>0&&"Application"===t?S.map((function(e,t){return Object(b.jsxs)("div",{className:"w-30 textaltbg pa3 ma2 f5 measure b br3 relative",children:[Object(b.jsx)("div",{className:"flex justify-around absolute top-1 right-1 highlight",children:Object(b.jsx)("button",{className:"iconsbg h2 w2 br-100 flex justify-center items-center mh1 bn highlight",onClick:function(){return function(e,t,c,s){A(!0),o(!n),R({id:e,name:t,describe:c,support:s})}(e.id,e.name,e.description,e.hasSupportContract)},children:Object(b.jsx)(O.a,{icon:a.edit})})}),Object(b.jsxs)("div",{className:"blockid f6 measure lh-copy",children:["Application ID: ",e.id]}),Object(b.jsx)("div",{className:"f5 measure lh-copy",children:e.name}),Object(b.jsx)("div",{className:"f6 measure lh-copy",children:e.description}),Object(b.jsxs)("div",{className:"f6 measure lh-copy",children:["Installed: ",e.installationDate.substring(0,10)]}),Object(b.jsxs)("div",{className:"f6 measure lh-copy",children:["Has Support Contract: ",e.hasSupportContract?"Yes":"No"]})]},t)})):Object(b.jsxs)("div",{children:["Customer has no records for ",t]})||Object(b.jsx)("div",{children:j})}),Object(b.jsxs)("button",{className:"flex items-center flex-column absolute shadow-3 highlightbg text iconsbg\r bottom-1 left-1 b pa1 grow-large w3 h3 br-100 ba bw1",onClick:H,children:[Object(b.jsx)("div",{className:" \r flex justify-center items-center",children:Object(b.jsx)(O.a,{icon:a.create,size:"1x"})}),Object(b.jsx)("div",{className:"f7 measure mt1",children:"Add Record"})]})]}),Object(b.jsx)("div",{className:"back h-100 flex justify-center items-center mt0",children:B?Object(b.jsx)(w,{clickEvent:H,route:t,id:P,name:T,describe:L,support:M}):Object(b.jsx)(N,{clickEvent:H,route:t})})]})]})}function S(e){var t=e.icons,c=Object(s.useState)(""),a=Object(r.a)(c,2),i=a[0],l=a[1],n=Object(s.useState)([]),o=Object(r.a)(n,2),d=o[0],h=o[1],j=Object(s.useState)([]),m=Object(r.a)(j,2),p=m[0],f=m[1];Object(s.useEffect)((function(){u("Call",f,l)}),[]);var v=Object(s.useContext)(x);return Object(s.useEffect)((function(){p.length>0&&h(p.filter((function(e){return e.customer.id===v.id})))}),[p,v.id]),Object(b.jsxs)("div",{className:"block2 w-90 flex justify-center items-center relative shadow-4 mt3 br4",children:[d.length>0?Object(b.jsx)("h1",{className:"customername f3 lh-title",children:d[0].customer.name}):null,Object(b.jsx)("div",{className:"block1inner relative w-100 h-100 shadow-4 br4 ",children:Object(b.jsxs)("div",{className:"front2",children:[Object(b.jsxs)("div",{className:"absolute top-1 left-1 flex items-center b highlight verticaltext",children:[Object(b.jsx)(O.a,{icon:t.header,size:"2x"}),Object(b.jsx)("div",{className:"f6 measure lh-title mt2 textalt flex",children:"Call Log"})]}),Object(b.jsx)("div",{className:"relative flex w-100 flex-column items-start pa3 calllist overflow-y-auto scroll scroll2",children:Object(b.jsxs)("ul",{className:"w-100",children:[Object(b.jsxs)("li",{className:"flex justify-between items-center  ma1 pa1 w-100 h3 b f5 lh-title stick top--1 iconsbg text",children:[Object(b.jsx)("div",{className:"tablecol1",children:"Application"}),Object(b.jsx)("div",{className:"tablecol2",children:"Issues"}),Object(b.jsx)("div",{className:"tablecol3",children:"Call Status"})]}),d.length>0&&d.map((function(e,t){return Object(b.jsxs)("li",{className:"flex justify-between items-center ma1 pa1 w-100 shadow-1 h3 b",children:[Object(b.jsx)("div",{className:"tablecol1 f5 lh-copy",children:e.application.name}),Object(b.jsx)("div",{className:"tablecol2 f5 lh-copy",children:e.description}),Object(b.jsx)("div",{className:"tablecol3",children:Object(b.jsx)(C,{needed:e})})]},3*t)})),console.log(i)]})}),Object(b.jsxs)("div",{className:"flex flex-row justify-between w-100",children:[Object(b.jsx)("div",{className:"sel1 f6 lh-copy",children:"Open"}),Object(b.jsx)("div",{className:"sel2 f6 lh-copy",children:"Close"}),Object(b.jsx)("div",{className:"sel3 f6 lh-copy",children:"Re-Opened"}),Object(b.jsx)("div",{className:"sel4 f6 lh-copy"})]})]})})]})}function I(){return Object(b.jsx)("div",{className:"w-80 flex flex-column justify-around h-100 scroll",children:"Data here"})}var k=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(s.useState)(""),l=Object(r.a)(i,2),o=l[0],O=l[1],v=Object(s.useState)(0),g=Object(r.a)(v,2),N=g[0],w=g[1],C=Object(s.useState)({id:0,data:[]}),k=Object(r.a)(C,2),D=k[0],B=k[1];Object(s.useEffect)((function(){u("Customer",a,O)}),[]),Object(s.useEffect)((function(){N&&function(e,t,c){try{Promise.all([d.a.get("https://techtestcalllogapi.azurewebsites.net/api/Application/".concat(e)),d.a.get("https://techtestcalllogapi.azurewebsites.net/api/Call/".concat(e)),d.a.get("https://techtestcalllogapi.azurewebsites.net/api/Statistics/".concat(e)),d.a.get("https://techtestcalllogapi.azurewebsites.net/api/Status/".concat(e))]).then((function(s){var a=[s[0].data,s[1].data,s[2].data,s[3].data];console.log(a),t({id:e,data:a}),c("")}))}catch(s){c("There seems to be a problem getting data for this customer")}}(N,B,O)}),[N]);var A=Object(j.g)();return Object(b.jsxs)("div",{className:"w-100 vh-100 flex flex-row",children:[Object(b.jsx)("aside",{className:"w-25 flex justify-center items-center relative",children:Object(b.jsx)("div",{className:"absolute aside w-100 ml3 br4 flex justify-center items-center",children:Object(b.jsx)(m,{customers:c,setCustomerId:w,getCustomerId:h,asyncErr:o})})}),Object(b.jsxs)("main",{className:"w-75 flex flex-column items-center mt2",children:[N>0&&Object(b.jsxs)("div",{className:"flex flex-column w-90",children:[Object(b.jsx)("h1",{className:"f2 lh-title",children:"Main Dashboard"}),Object(b.jsxs)("div",{className:"flex flex-row justify-between w-34 ",children:[Object(b.jsx)("div",{className:"".concat("/statistics"===A.pathname?"a":null),children:Object(b.jsx)(n.b,{to:"/statistics",children:"Statistics"})}),Object(b.jsx)("div",{className:"".concat("/calls"===A.pathname?"a":null),children:Object(b.jsx)(n.b,{to:"/calls",children:"Calls"})}),Object(b.jsx)("div",{className:"".concat("/applications"===A.pathname?"a":null),children:Object(b.jsx)(n.b,{to:"/applications",children:"Applications"})})]})]}),Object(b.jsx)(x.Provider,{value:D,children:Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{exact:!0,path:"/",children:Object(b.jsx)(p,{})}),N>0?Object(b.jsx)(j.a,{path:"/applications",children:Object(b.jsx)(y,{service:"Application",icons:{header:f.b,edit:f.c,delete:f.f,create:f.d},className:"block1 w-90 flex justify-center items-center relative shadow-4 mt3 br4"})}):Object(b.jsx)("div",{className:"flex justify-center items-center f3 textalt h-100 b",children:"Please click on a customer to view records"}),N>0?Object(b.jsx)(j.a,{path:"/statistics",children:Object(b.jsx)(I,{})}):Object(b.jsx)("div",{className:"flex justify-center items-center f3 textalt h-100 b",children:"Please click on a customer to view records"}),N>0?Object(b.jsx)(j.a,{path:"/calls",children:Object(b.jsx)(S,{icons:{header:f.e,edit:f.c,delete:f.f,create:f.d}})}):Object(b.jsx)("div",{className:"flex justify-center items-center f3 textalt h-100 b",children:"Please click on a customer to view records"})]})})]})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,223)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,l=t.getTTFB;c(e),s(e),a(e),i(e),l(e)}))};l.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(n.a,{children:Object(b.jsx)(k,{})})}),document.getElementById("root")),D()},97:function(e,t,c){},99:function(e,t,c){}},[[222,1,2]]]);
//# sourceMappingURL=main.f66de4bf.chunk.js.map